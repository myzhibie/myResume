"use strict";function myAnimate(a,b,c,d,e){var f,g;4==arguments.length?d.length>=4?(f=d,g=null):(f=Tween.Quad.easeIn,g=d):(f=d?d:Tween.Quad.easeIn,g=e?e:null),Queue.queue(a,"fx",function(){var d=[],e=[],h=0;for(var i in b)d[i]=css(a,i),e[i]=b[i]-d[i];a.time=setInterval(function(){var i=!0;if(c>h){i=!1;for(var j in b)css(a,j,f(h,d[j],e[j],c))}if(h+=5,i){for(var j in b)css(a,j,b[j]);clearInterval(a.time),g&&g(),Queue.dequeue(a,"fx")}},5)})}function css(a,b,c){if(1==a.nodeType){var b=b.replace(/^\s+|\s+$/g,"");if(2==arguments.length){if("opacity"==b)return Math.round(100*parseFloat(a.currentStyle?a.currentStyle[b]||1:getComputedStyle(a,null)[b]||1));if("scrollTop"==b||"scrollLeft"==b)return a[b];if("width"==b||"height"==b||"top"==b||"left"==b){var d="offset"+b.replace(b.charAt(0),b.charAt(0).toUpperCase());return a[d]}return a.currentStyle?a.currentStyle[b]:getComputedStyle(a,null)[b]}if(3==arguments.length)switch(b){case"width":case"height":case"top":case"left":a.style[b]=c+"px";break;case"opacity":a.style.filter="alpha(opacity="+c+")",a.style[b]=c/100;break;case"scrollTop":case"scrollLeft":a[b]=c;break;default:a.style[b]=c}}}function GetLeapMonth(a){var b=LunarLeapYear[a-2001>>1];return 0==(a-2001&1)?b>>4:15&b}function LunarMonthDays(a,b){var c,d,e;return c=0,d=29,e=16-b,b>GetLeapMonth(a)&&GetLeapMonth(a)>0&&e--,(LunarDaysOfMonth[a-2001]&1<<e)>0&&d++,b==GetLeapMonth(a)&&(c=(LunarDaysOfMonth[a-2001]&1<<e-1)>0?30:29),d+(c<<16)}function LunarYearDays(a){var b,c;b=0;for(var d=1;12>=d;d++)c=LunarMonthDays(a,d),b+=c>>16&65535,b+=65535&c;return b}function FormatLunarYear(a){var b,c=new String("甲乙丙丁戊己庚辛壬癸"),d=new String("子丑寅卯辰巳午未申酉戌亥");return b=c.substr((a-4)%10,1),b+=d.substr((a-4)%12,1),b+"年"}function FormatLunarMonth(a){var b,c=new String("正二三四五六七八九十");return b=10>=a?c.substr(a-1,1):11==a?"十一":"十二",b+"月"}function FormatLunarDay(a){var b,c=new String("初十廿三"),d=new String("一二三四五六七八九十");return b=20!=a&&30!=a?c.substr((a-1)/10,1)+d.substr((a-1)%10,1):20!=a?c.substr(a/10,1)+"十":"二十"}function GetLunarDateString(a){var b,c,d,e,f=!1,g=6e4,h=60*g,i=24*h,j=Math.round(a.getTime()/i)-11323;if(23>j)iYear=2e3,d=12,e=j+7;else{for(j-=23,c=2001,d=1,e=1,b=LunarYearDays(c);j>=b;)j-=b,c++,b=LunarYearDays(c);for(b=65535&LunarMonthDays(c,d);j>=b;){if(j-=b,d==GetLeapMonth(c)){if(b=LunarMonthDays(c,d)>>16,b>j){f=b>0?!0:!1;break}j-=b}d++,b=65535&LunarMonthDays(c,d)}e+=j}return FormatLunarDay(e)}angular.module("myproApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$resourceProvider","$routeProvider",function(a,b){b.when("/",{templateUrl:"./views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"./views/about.html",controller:"AboutCtrl"}).when("/test",{templateUrl:"./views/test.html",controller:"TestCtrl"}).otherwise({redirectTo:"/"}),a.defaults.stripTrailingSlashes=!1}]);var Queue={queue:function(a,b,c){var b=b?b:"fx",d=Data.setData(a,b);return c?(d||(d=Data.setData(a,b,[])),c instanceof Array?d=Data.setData(a,b,c):d.push(c),"fx"==b&&"mark"!=d[0]&&this.dequeue(a,b),d):d||[]},wait:function(a,b,c){this.queue(a,b,function(){var d=setTimeout(function(){clearTimeout(d),Queue.dequeue(a,b)},c)})},stop:function(a,b){this.queue(a,b,[])},timeout:function(a,b){this.queue(a,b).unshift("timeout")},dequeue:function(a,b){var b=b||"fx",c=Data.setData(a,b),d=c.shift();"timeout"!=d&&("mark"==d&&(d=c.shift()),d&&("fx"==b&&c.unshift("mark"),d.call(a)))}},Data={cache:{},uuid:0,expando:+new Date,setData:function(a,b,c){var d=a[this.expando];return d||(d=++this.uuid,a[this.expando]=d),this.cache[d]||(this.cache[d]={}),c&&(this.cache[d][b]=c),this.cache[d][b]}},Tween={Linear:function(a,b,c,d){return c*a/d+b},Quad:{easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}},Cubic:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b}},Quart:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOut:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b}},Quint:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b}},Sine:{easeIn:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},easeOut:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOut:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b}},Expo:{easeIn:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},easeOut:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOut:function(a,b,c,d){return 0==a?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b}},Circ:{easeIn:function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},easeOut:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b}},Elastic:{easeIn:function(a,b,c,d,e,f){if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return-(e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f))+b},easeOut:function(a,b,c,d,e,f){if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return e*Math.pow(2,-10*a)*Math.sin(2*(a*d-g)*Math.PI/f)+c+b},easeInOut:function(a,b,c,d,e,f){if(0==a)return b;if(2==(a/=d/2))return b+c;if(f||(f=.3*d*1.5),!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return 1>a?-.5*e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)+b:e*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)*.5+c+b}},Back:{easeIn:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},easeOut:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOut:function(a,b,c,d,e){return void 0==e&&(e=1.70158),(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b}},Bounce:{easeIn:function(a,b,c,d){return c-Tween.Bounce.easeOut(d-a,0,c,d)+b},easeOut:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeInOut:function(a,b,c,d){return d/2>a?.5*Tween.Bounce.easeIn(2*a,0,c,d)+b:.5*Tween.Bounce.easeOut(2*a-d,0,c,d)+.5*c+b}}},LunarDaysOfMonth=new Array(54440,54432,55888,23208,22176,43736,9680,37584,51544,43344,46240,46416,46416,21928,19360,42416,21176,21168,43312,29864,27296,44368,19880,19296,38256,42208,53856,59696,54576,23200,27472,38608,19176,19152,42192,53848,53840,54560,55968,46496,22224,19160,18864,42168,42160,43600,46376,27936,44448,21936),LunarLeapYear=new Array(64,2,7,0,80,4,9,0,96,4,0,32,96,5,0,48,176,6,0,80,2,7,0,80,3);angular.module("myproApp").controller("MainCtrl",["$scope",function(){}]).factory("redirect",["$rootScope","$window",function(a){return function(b){angular.forEach(a.list,function(c,d){a.list[d][2]=c[0]==b?"active":""});var c=document.getElementById(b),d=document.getElementsByTagName("body")[0];myAnimate(d,{scrollTop:c.offsetTop},1e3,Tween.Quad.easeInOut)}}]).factory("getAboutMeInfo",["$resource",function(a){return a("./data/aboutme.json",{},{query:{method:"GET",isArray:!1}})}]).factory("getTimeLineInfo",["$resource",function(a){return a("./data/timeline.json",{},{query:{method:"GET",isArray:!1}})}]).factory("getExpInfo",["$resource",function(a){return a("./data/experience.json",{},{query:{method:"GET",isArray:!0}})}]).factory("getSkillInfo",["$resource",function(a){return a("./data/skill.json",{},{query:{method:"GET",isArray:!1}})}]).factory("getContactInfo",["$resource",function(a){return a("./data/contact.json",{},{query:{method:"GET",isArray:!0}})}]).factory("getTop",function(){return function(a){for(var b=a.offsetTop;a.offsetParent;)b+=a.offsetParent.offsetTop,a=a.offsetParent;return b}}),angular.module("myproApp").controller("AboutCtrl",["$scope","getAboutMeInfo","$rootScope","redirect",function(a,b,c,d){a.base=b.query(),a.showClass=function(a){d(a),angular.forEach(c.list,function(b,d){c.list[d][2]=b[0]==a?"active":""})}}]).directive("aboutMe",function(){return{restrict:"E",templateUrl:"./views/about.html"}}),angular.module("myproApp").controller("navCtrl",["$rootScope","$scope","redirect",function(a,b,c){a.list=[["home","首页","active"],["about","关于我",""],["project","项目经历",""],["experience","个人经历",""],["skill","个人技能",""],["contact","联系我",""]],b.showClass=function(b){c(b),angular.forEach(a.list,function(c,d){a.list[d][2]=c[0]==b?"active":""})},b.showCase="hideList",b.toggleList=function(){b.showCase="hideList"==b.showCase?"showList":"hideList"}}]).directive("myNav",function(){return{restrict:"E",templateUrl:"./views/nav.html"}}).directive("stickyNav",["$window",function(a){return function(b,c){var d=css(c[0],"top");angular.element(a).on("scroll",function(){var a=document.getElementsByTagName("body")[0],b=a.scrollTop;b>=d?c.addClass("fixed"):c.removeClass("fixed")})}}]),angular.module("myproApp").controller("homeCtrl",["$scope","redirect",function(a,b){a.redirect=function(a){b(a)}}]).directive("myHome",function(){return{restrict:"E",templateUrl:"./views/home.html"}}).directive("myRedirect",["$rootScope","redirect",function(a,b){return function(a,c,d){c.on("click",function(a){a.preventDefault(),b(d.href.slice(1))})}}]).directive("myWelcome",["$window","$timeout",function(a,b){return{restrict:"E",template:"<span class='welcome'>欢迎访问</span>",replace:!0,link:function(a,c){var d=document.getElementsByTagName("body")[0],e=(css(d,"width")-css(c[0],"width"))/2;b(function(){myAnimate(c[0],{left:e,opacity:100},3e3,Tween.Bounce.easeOut)},1e3)}}}]).directive("myWrap",["$timeout",function(a){return function(b,c){a(function(){myAnimate(c[0],{opacity:100},2e3,Tween.Quad.easeOut)},1e3)}}]),angular.module("myproApp").controller("footerCtrl",["$scope",function(a){a.isShowTop=!1}]).directive("gotoTop",["redirect",function(a){return function(b,c,d){c.on("click",function(b){b.preventDefault(),a(d.href.slice(1))})}}]).directive("myTop",["$window","redirect",function(a,b){return function(c,d,e){angular.element(a).on("scroll",function(){var a=document.body.scrollTop,b=a+css(document.body,"height")-50;"undefined"==typeof document.body.style.maxHeight&&(css(d[0],"position","absolute"),css(d[0],"top",b)),c.$apply(a>300?function(){c.isShowTop=!0}:function(){c.isShowTop=!1})}),d.on("click",function(a){a.preventDefault(),b(e.href.slice(1))})}}]),angular.module("myproApp").controller("timeCtrl",["$rootScope","$scope","getTimeLineInfo",function(a,b,c){b.list=c.query(),b.getLunar=function(a){var b=new Date(a),c=GetLunarDateString(b);return c[0]+"\n"+c[1]},b.getYear=function(a){return a.slice(1)},b.getMonth=function(a){return a.slice(1)},b.yearMonthHigh=["current","","","","","","","",""],b.getChildHigh=function(a){return"current"==b.yearMonthHigh[a]?"dot_child_current":""},b.getParentHigh=function(a){return"current"==b.yearMonthHigh[a]?"dot_current":""},b.position=[]}]).directive("myProject",["$window",function(){return{restrict:"E",templateUrl:"./views/timeline.html"}}]).directive("setPos",["getTop","$window",function(a,b){return function(c,d){var e=a(d[0]);c.position.push(e),b.onscroll=function(){var a=document.body.scrollTop+100;c.$apply(function(){for(var b=0;b<c.yearMonthHigh.length;b++)c.yearMonthHigh[b]="";for(var d=1;d<c.position.length;d++)a>c.position[d-1]&&a<c.position[d]?c.yearMonthHigh[d]="current":c.yearMonthHigh[0]="current"})}}}]),angular.module("myproApp").controller("expCtrl",["$scope","getExpInfo",function(a,b){a.animated=!1,a.buttons=["on","",""],a.data=b.query(),a.changeButton=function(b){b>2?b=0:0>b&&(b=2);for(var c=0;c<a.buttons.length;c++)a.buttons[c]="";a.buttons[b]="on"},a.curIndex=0,a.getItemSpan=function(b){return"on"==a.buttons[b]?"showitem":""},a.getItemImg=function(b){return"on"==a.buttons[b]?"show":""},a.getLiClass=function(a){return 2==a?"":"bottom-none"}}]).directive("myExp",function(){return{restrict:"E",templateUrl:"views/exp.html"}}).directive("mySlider",function(){return function(a,b,c){var d=document.getElementById("sliderList"),e=css(d,"left");b.on("click",function(){a.$apply(function(){a.animated||(a.animated=!0,a.changeButton(c.index),myAnimate(d,{left:e+-1200*c.index},200,"",function(){a.animated=!1}))})})}}).directive("myClick",function(){return function(a,b,c){var d=document.getElementById("sliderList"),e=css(d,"left");b.on("click",function(){a.$apply(function(){a.animated||(a.animated=!0,"left"==c.act?a.curIndex+=1:a.curIndex-=1,myAnimate(d,{left:e+-1200*a.curIndex},200,"",function(){a.curIndex>2?(a.curIndex=0,css(d,"left",-1200)):a.curIndex<0&&(a.curIndex=2,css(d,"left",-3600)),a.animated=!1}),a.changeButton(a.curIndex))})})}}),angular.module("myproApp").controller("skillCtrl",["$scope","getSkillInfo",function(a,b){a.data=b.query()}]).directive("mySkill",function(){return{restrict:"E",templateUrl:"./views/skill.html"}}).directive("myZoom",function(){return function(a,b){b.on("mouseover",function(){myAnimate(b[0],{width:300,height:300,left:-25,top:-25},500)}).on("mouseout",function(){myAnimate(b[0],{width:250,height:250,left:0,top:0},500)})}}),angular.module("myproApp").controller("contactCtrl",["$scope","getContactInfo",function(a,b){a.base=b.query()}]).directive("myContact",function(){return{restrict:"E",templateUrl:"./views/contact.html"}}).directive("myShake",function(){return function(a,b){b.on("mouseover",function(){myAnimate(b[0],{top:"-80"},200,Tween.Quad.easeInOut)}),b.on("mouseout",function(){myAnimate(b[0],{top:"0"},200)})}});